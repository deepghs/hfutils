

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hfutils.index.local_fetch &mdash; hfutils 0.9.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=c9d0a6ec" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=39bb1c6d"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="hfutils.index.make" href="make.html" />
    <link rel="prev" title="hfutils.index.fetch" href="fetch.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            hfutils
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/quick_start/index.html">Quick Start</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../information/environment.result.html">Run Environment Information</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../archive/index.html">hfutils.archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cache/index.html">hfutils.cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">hfutils.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../entry/index.html">hfutils.entry</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">hfutils.index</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fetch.html">hfutils.index.fetch</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">hfutils.index.local_fetch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tar-get-index">tar_get_index</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hfutils.index.local_fetch.tar_get_index"><code class="docutils literal notranslate"><span class="pre">tar_get_index()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tar-list-files">tar_list_files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hfutils.index.local_fetch.tar_list_files"><code class="docutils literal notranslate"><span class="pre">tar_list_files()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tar-file-exists">tar_file_exists</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hfutils.index.local_fetch.tar_file_exists"><code class="docutils literal notranslate"><span class="pre">tar_file_exists()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tar-file-size">tar_file_size</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hfutils.index.local_fetch.tar_file_size"><code class="docutils literal notranslate"><span class="pre">tar_file_size()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tar-file-info">tar_file_info</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hfutils.index.local_fetch.tar_file_info"><code class="docutils literal notranslate"><span class="pre">tar_file_info()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tar-file-download">tar_file_download</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hfutils.index.local_fetch.tar_file_download"><code class="docutils literal notranslate"><span class="pre">tar_file_download()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="make.html">hfutils.index.make</a></li>
<li class="toctree-l2"><a class="reference internal" href="validate.html">hfutils.index.validate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../operate/index.html">hfutils.operate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../repository/index.html">hfutils.repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">hfutils.utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">hfutils</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">hfutils.index</a></li>
      <li class="breadcrumb-item active">hfutils.index.local_fetch</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/api_doc/index/local_fetch.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
    
    
  <section id="module-hfutils.index.local_fetch">
<span id="hfutils-index-local-fetch"></span><h1>hfutils.index.local_fetch<a class="headerlink" href="#module-hfutils.index.local_fetch" title="Link to this heading"></a></h1>
<p>This module provides utility functions for working with tar archives and their associated index files.
It includes functions for retrieving archive indexes, listing files, checking file existence,
getting file information, and downloading files from archives.</p>
<p>The module relies on a JSON-based index file that contains metadata about the files within the archive,
including their offsets, sizes, and optional SHA256 hashes.</p>
<p>Functions in this module are designed to work with both local archive files and their corresponding
index files, providing a convenient interface for archive manipulation and file extraction.</p>
<section id="tar-get-index">
<h2>tar_get_index<a class="headerlink" href="#tar-get-index" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="hfutils.index.local_fetch.tar_get_index">
<span class="sig-prename descclassname"><span class="pre">hfutils.index.local_fetch.</span></span><span class="sig-name descname"><span class="pre">tar_get_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/hfutils/index/local_fetch.html#tar_get_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hfutils.index.local_fetch.tar_get_index" title="Link to this definition"></a></dt>
<dd><p>Retrieve the index data for a given tar archive file.</p>
<p>This function reads the JSON index file associated with the archive,
which contains metadata about the files within the archive.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>archive_file</strong> (<em>str</em>) – Path to the tar archive file.</p></li>
<li><p><strong>idx_file</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Optional path to the index file. If not provided,
it will be inferred from the archive file name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The parsed JSON data from the index file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – If the index file is not found.</p></li>
<li><p><strong>json.JSONDecodeError</strong> – If the index file is not valid JSON.</p></li>
</ul>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">index_data</span> <span class="o">=</span> <span class="n">tar_get_index</span><span class="p">(</span><span class="s1">&#39;my_archive.tar&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
<section id="tar-list-files">
<h2>tar_list_files<a class="headerlink" href="#tar-list-files" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="hfutils.index.local_fetch.tar_list_files">
<span class="sig-prename descclassname"><span class="pre">hfutils.index.local_fetch.</span></span><span class="sig-name descname"><span class="pre">tar_list_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/hfutils/index/local_fetch.html#tar_list_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hfutils.index.local_fetch.tar_list_files" title="Link to this definition"></a></dt>
<dd><p>List all files contained within the specified tar archive.</p>
<p>This function uses the archive’s index file to retrieve the list of files
without actually reading the tar archive itself.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>archive_file</strong> (<em>str</em>) – Path to the tar archive file.</p></li>
<li><p><strong>idx_file</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Optional path to the index file. If not provided,
it will be inferred from the archive file name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of file names contained in the archive.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">tar_list_files</span><span class="p">(</span><span class="s1">&#39;my_archive.tar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
<section id="tar-file-exists">
<h2>tar_file_exists<a class="headerlink" href="#tar-file-exists" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="hfutils.index.local_fetch.tar_file_exists">
<span class="sig-prename descclassname"><span class="pre">hfutils.index.local_fetch.</span></span><span class="sig-name descname"><span class="pre">tar_file_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_in_archive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/hfutils/index/local_fetch.html#tar_file_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hfutils.index.local_fetch.tar_file_exists" title="Link to this definition"></a></dt>
<dd><p>Check if a specific file exists within the tar archive.</p>
<p>This function uses the archive’s index to check for file existence
without reading the entire archive.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>archive_file</strong> (<em>str</em>) – Path to the tar archive file.</p></li>
<li><p><strong>file_in_archive</strong> (<em>str</em>) – The name of the file to check for in the archive.</p></li>
<li><p><strong>idx_file</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Optional path to the index file. If not provided,
it will be inferred from the archive file name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the file exists in the archive, False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exists</span> <span class="o">=</span> <span class="n">tar_file_exists</span><span class="p">(</span><span class="s1">&#39;my_archive.tar&#39;</span><span class="p">,</span> <span class="s1">&#39;path/to/file.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">exists</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File exists in the archive&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
<section id="tar-file-size">
<h2>tar_file_size<a class="headerlink" href="#tar-file-size" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="hfutils.index.local_fetch.tar_file_size">
<span class="sig-prename descclassname"><span class="pre">hfutils.index.local_fetch.</span></span><span class="sig-name descname"><span class="pre">tar_file_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_in_archive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../../_modules/hfutils/index/local_fetch.html#tar_file_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hfutils.index.local_fetch.tar_file_size" title="Link to this definition"></a></dt>
<dd><p>Get the size of a specific file within the tar archive.</p>
<p>This function returns the size of the specified file in bytes.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>archive_file</strong> (<em>str</em>) – Path to the tar archive file.</p></li>
<li><p><strong>file_in_archive</strong> (<em>str</em>) – The name of the file to get the size for.</p></li>
<li><p><strong>idx_file</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Optional path to the index file. If not provided,
it will be inferred from the archive file name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The size of the file in bytes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>FileNotFoundError</strong> – If the specified file is not found in the archive.</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">size</span> <span class="o">=</span> <span class="n">tar_file_size</span><span class="p">(</span><span class="s1">&#39;my_archive.tar&#39;</span><span class="p">,</span> <span class="s1">&#39;path/to/file.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File size: </span><span class="si">{</span><span class="n">size</span><span class="si">}</span><span class="s2"> bytes&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
<section id="tar-file-info">
<h2>tar_file_info<a class="headerlink" href="#tar-file-info" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="hfutils.index.local_fetch.tar_file_info">
<span class="sig-prename descclassname"><span class="pre">hfutils.index.local_fetch.</span></span><span class="sig-name descname"><span class="pre">tar_file_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_in_archive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../../_modules/hfutils/index/local_fetch.html#tar_file_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hfutils.index.local_fetch.tar_file_info" title="Link to this definition"></a></dt>
<dd><p>Retrieve information about a specific file within the tar archive.</p>
<p>This function returns a dictionary containing metadata about the specified file,
such as its size and offset within the archive.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>archive_file</strong> (<em>str</em>) – Path to the tar archive file.</p></li>
<li><p><strong>file_in_archive</strong> (<em>str</em>) – The name of the file to get information for.</p></li>
<li><p><strong>idx_file</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Optional path to the index file. If not provided,
it will be inferred from the archive file name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary containing file metadata.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>FileNotFoundError</strong> – If the specified file is not found in the archive.</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">info</span> <span class="o">=</span> <span class="n">tar_file_info</span><span class="p">(</span><span class="s1">&#39;my_archive.tar&#39;</span><span class="p">,</span> <span class="s1">&#39;path/to/file.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File size: </span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> bytes&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
<section id="tar-file-download">
<h2>tar_file_download<a class="headerlink" href="#tar-file-download" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="hfutils.index.local_fetch.tar_file_download">
<span class="sig-prename descclassname"><span class="pre">hfutils.index.local_fetch.</span></span><span class="sig-name descname"><span class="pre">tar_file_download</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">archive_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_in_archive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1048576</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_download</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/hfutils/index/local_fetch.html#tar_file_download"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hfutils.index.local_fetch.tar_file_download" title="Link to this definition"></a></dt>
<dd><p>Extract and download a specific file from the tar archive to a local file.</p>
<p>This function reads the specified file from the archive and writes it to a local file.
It also performs integrity checks to ensure the downloaded file is complete and matches
the expected hash (if provided in the index).</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>archive_file</strong> (<em>str</em>) – Path to the tar archive file.</p></li>
<li><p><strong>file_in_archive</strong> (<em>str</em>) – The name of the file to extract from the archive.</p></li>
<li><p><strong>local_file</strong> (<em>str</em>) – The path where the extracted file should be saved.</p></li>
<li><p><strong>idx_file</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – Optional path to the index file. If not provided,
it will be inferred from the archive file name.</p></li>
<li><p><strong>chunk_size</strong> (<em>int</em>) – The size of chunks to read and write, in bytes. Default is 1MB.</p></li>
<li><p><strong>force_download</strong> (<em>bool</em>) – Force download the file to destination path.
Defualt to <cite>False</cite>, downloading will be skipped if the local file
is fully matched with expected file.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – If the specified file is not found in the archive.</p></li>
<li><p><a class="reference internal" href="fetch.html#hfutils.index.fetch.ArchiveStandaloneFileIncompleteDownload" title="hfutils.index.fetch.ArchiveStandaloneFileIncompleteDownload"><strong>ArchiveStandaloneFileIncompleteDownload</strong></a> – If the downloaded file size doesn’t match the expected size.</p></li>
<li><p><a class="reference internal" href="fetch.html#hfutils.index.fetch.ArchiveStandaloneFileHashNotMatch" title="hfutils.index.fetch.ArchiveStandaloneFileHashNotMatch"><strong>ArchiveStandaloneFileHashNotMatch</strong></a> – If the SHA256 hash of the downloaded file doesn’t match the expected hash.</p></li>
</ul>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tar_file_download</span><span class="p">(</span><span class="s1">&#39;my_archive.tar&#39;</span><span class="p">,</span> <span class="s1">&#39;path/to/file.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;local_file.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="fetch.html" class="btn btn-neutral float-left" title="hfutils.index.fetch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="make.html" class="btn btn-neutral float-right" title="hfutils.index.make" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, narugo1992.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: HEAD
    <span class="fa fa-caret-down"></span>
  </span>
        <div class="rst-other-versions">
                <dl>
                    <dt>Tags</dt>
                        <dd><a href="../../../v0.0.1/index.html">v0.0.1</a></dd>
                        <dd><a href="../../../v0.0.2/index.html">v0.0.2</a></dd>
                        <dd><a href="../../../v0.0.3/index.html">v0.0.3</a></dd>
                        <dd><a href="../../../v0.0.4/index.html">v0.0.4</a></dd>
                        <dd><a href="../../../v0.0.5/index.html">v0.0.5</a></dd>
                        <dd><a href="../../../v0.0.6/index.html">v0.0.6</a></dd>
                        <dd><a href="../../../v0.1.0/index.html">v0.1.0</a></dd>
                        <dd><a href="../../../v0.1.1/index.html">v0.1.1</a></dd>
                        <dd><a href="../../../v0.1.2/index.html">v0.1.2</a></dd>
                        <dd><a href="../../../v0.2.0/index.html">v0.2.0</a></dd>
                        <dd><a href="../../../v0.2.1/index.html">v0.2.1</a></dd>
                        <dd><a href="../../../v0.2.10/index.html">v0.2.10</a></dd>
                        <dd><a href="../../../v0.2.11/index.html">v0.2.11</a></dd>
                        <dd><a href="../../../v0.2.2/index.html">v0.2.2</a></dd>
                        <dd><a href="../../../v0.2.3/index.html">v0.2.3</a></dd>
                        <dd><a href="../../../v0.2.4/index.html">v0.2.4</a></dd>
                        <dd><a href="../../../v0.2.5/index.html">v0.2.5</a></dd>
                        <dd><a href="../../../v0.2.6/index.html">v0.2.6</a></dd>
                        <dd><a href="../../../v0.2.7/index.html">v0.2.7</a></dd>
                        <dd><a href="../../../v0.2.8/index.html">v0.2.8</a></dd>
                        <dd><a href="../../../v0.2.9/index.html">v0.2.9</a></dd>
                        <dd><a href="../../../v0.3.0/index.html">v0.3.0</a></dd>
                        <dd><a href="../../../v0.3.1/index.html">v0.3.1</a></dd>
                        <dd><a href="../../../v0.3.2/index.html">v0.3.2</a></dd>
                        <dd><a href="../../../v0.3.3/index.html">v0.3.3</a></dd>
                        <dd><a href="../../../v0.3.4/index.html">v0.3.4</a></dd>
                        <dd><a href="../../../v0.3.5/api_doc/index/local_fetch.html">v0.3.5</a></dd>
                        <dd><a href="../../../v0.3.6/api_doc/index/local_fetch.html">v0.3.6</a></dd>
                        <dd><a href="../../../v0.3.7/api_doc/index/local_fetch.html">v0.3.7</a></dd>
                        <dd><a href="../../../v0.3.8/api_doc/index/local_fetch.html">v0.3.8</a></dd>
                        <dd><a href="../../../v0.3.9/api_doc/index/local_fetch.html">v0.3.9</a></dd>
                        <dd><a href="../../../v0.4.0/api_doc/index/local_fetch.html">v0.4.0</a></dd>
                        <dd><a href="../../../v0.4.1/api_doc/index/local_fetch.html">v0.4.1</a></dd>
                        <dd><a href="../../../v0.4.2/api_doc/index/local_fetch.html">v0.4.2</a></dd>
                        <dd><a href="../../../v0.4.3/api_doc/index/local_fetch.html">v0.4.3</a></dd>
                        <dd><a href="../../../v0.4.4/api_doc/index/local_fetch.html">v0.4.4</a></dd>
                        <dd><a href="../../../v0.5.0/api_doc/index/local_fetch.html">v0.5.0</a></dd>
                        <dd><a href="../../../v0.5.1/api_doc/index/local_fetch.html">v0.5.1</a></dd>
                        <dd><a href="../../../v0.6.0/api_doc/index/local_fetch.html">v0.6.0</a></dd>
                        <dd><a href="../../../v0.7.0/api_doc/index/local_fetch.html">v0.7.0</a></dd>
                        <dd><a href="../../../v0.7.1/api_doc/index/local_fetch.html">v0.7.1</a></dd>
                        <dd><a href="../../../v0.8.0/api_doc/index/local_fetch.html">v0.8.0</a></dd>
                        <dd><a href="../../../v0.8.1/api_doc/index/local_fetch.html">v0.8.1</a></dd>
                </dl>
                <dl>
                    <dt>Branches</dt>
                        <dd><a href="../../../main/api_doc/index/local_fetch.html">main</a></dd>
                        <dd><a href="local_fetch.html">HEAD</a></dd>
                        <dd><a href="../../../dev/rate/index.html">dev/rate</a></dd>
                </dl>
        </div>
    </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>